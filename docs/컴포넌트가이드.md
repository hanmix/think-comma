# 공통 컴포넌트 사용 가이드

본 문서는 ThinkComma UI 공통 컴포넌트 사용 방법과 권장 패턴을 정리합니다. 모든 컴포넌트는 `@/components/ui` 인덱스를 통해 임포트합니다.

```
import { TcButton, TcCard, TcSelect, TcTextarea, TcDialog, TcModal, TcNavBar } from '@/components/ui'
```

## 버튼: `TcButton`
- 주요 props
  - `variant`: `primary | secondary | ghost | danger` 등
  - `size`: `sm | md | lg`
  - `disabled`: 비활성화
- 예시
```
<TcButton variant="primary" size="md" @click="doSubmit">제출</TcButton>
```

## 카드: `TcCard`
- 레이아웃 카드 컨테이너. `#header`, default, `#footer` 슬롯 제공
- 예시
```
<TcCard size="lg">
  <template #header>
    <h3>제목</h3>
  </template>
  본문 컨텐츠
  <template #footer>
    <TcButton variant="primary">확인</TcButton>
  </template>
</TcCard>
```

## 셀렉트: `TcSelect` (권장)
- “필드형” 셀렉트. 내부적으로 커스텀 리스트 UI를 렌더합니다.
- props
  - `v-model`: 선택 값(string)
  - `label`: 라벨 텍스트
  - `placeholder`: 플레이스홀더(미선택 시 표시)
  - `helpText`, `error`, `success`: 상태 메시지
  - `disabled`, `required`
  - `options`: `{ value: string; label: string; disabled?: boolean }[]`
  - `placeholderLabel`, `placeholderValue`, `showPlaceholder`
- 예시
```
<script setup lang="ts">
const categoryOptions = [
  { value: 'career', label: '진로/취업' },
  { value: 'relationship', label: '연애/인간관계' },
]
const category = ref('')
</script>

<TcSelect
  v-model="category"
  label="카테고리"
  :options="categoryOptions"
  placeholder="카테고리 선택"
/>
```
- 접근성
  - combobox + listbox ARIA를 내부에서 처리합니다.
  - 컨테이너에 `overflow: hidden`이 있으면 리스트가 잘릴 수 있으므로 주의하세요.

## 드롭다운 리스트: `TcDropdown` (헤드리스, 리스트 전용)
- 트리거/상태는 외부에서 제어하고, `TcDropdown`은 “옵션 리스트만” 렌더합니다.
- props
  - `open`: 표시 여부
  - `modelValue`: 선택 값
  - `options`: 옵션 배열
  - `placeholderLabel`, `placeholderValue`, `showPlaceholder`
  - `direction`: `'down' | 'up'`
  - `listboxId`, `labelledby`: 접근성 속성(외부 트리거와 연동)
- emits
  - `select(value)`: 항목 선택
  - `requestClose()`: ESC 등으로 닫기 요청
- 예시
```
<script setup lang="ts">
import { TcDropdown } from '@/components/ui'
const open = ref(false)
const value = ref('')
const opts = [ { value: 'a', label: 'A' }, { value: 'b', label: 'B' } ]
</script>

<div class="tc-dropdown" style="position: relative">
  <button @click="open = !open">{{ value || '선택' }}</button>
  <TcDropdown
    :open="open"
    :model-value="value"
    :options="opts"
    direction="down"
    @select="(v) => { value = v; open = false }"
    @requestClose="open = false"
  />
</div>
```
- 고급: 상태/키보드 처리까지 분리하고 싶다면 `useDropdown()` 컴포저블을 사용해 트리거/리스트를 직접 조립하세요.

## 텍스트영역: `TcTextarea`
- props: `v-model`, `label`, `placeholder`, `rows`, `helpText`, `error`, `success`, `maxlength`, `textareaClass`
- 예시
```
<TcTextarea
  v-model="content"
  label="설명"
  :rows="6"
  :maxlength="1000"
  :help-text="'최소 10자 · 최대 1000자'"
  :error="error || undefined"
/>
```

## 다이얼로그/모달: `TcDialog`, `TcModal`
- 열림/닫힘은 상위에서 상태로 제어, `@close`로 닫기 핸들링
- 예시
```
<TcDialog v-if="open" title="확인" @close="open=false">
  <p>내용</p>
  <template #footer>
    <TcButton @click="open=false">닫기</TcButton>
  </template>
</TcDialog>
```

## 내비게이션 바: `TcNavBar`
- 중앙 로고 클릭 → 홈 이동(또는 `useNavStack().popToRoot()`로 앱스러운 동작)
- 뒤로가기 버튼 노출은 `useNavStack().canGoBack` 기준

## 드롭다운 컴포저블: `useDropdown`
- 파일: `src/composables/useDropdown.ts`
- 제공: `open`, `activeIndex`, `direction`, `selectedOption`, `triggerId`, `listboxId`, `toggle`, `selectValue`, `onTriggerKeydown`, `onOverlayKeydown`, `getTriggerProps`, `getListboxProps`, `getOptionProps`
- 용도: 완전 커스터마이즈된 드롭다운을 빌드할 때 사용

## 베스트 프랙티스
- 입력 컴포넌트: 라벨 필수, 보조 텍스트는 `helpText`로 통일, 에러 시 `error`와 `aria-invalid` 설정
- 리스트 오버레이: 컨테이너에 `position: relative`, 모바일은 네이티브 컨트롤 고려
- 접근성: 키보드 탐색(↑/↓/Home/End/Enter/ESC) QA 포함, `aria-describedby`로 카운터/도움말 연결

